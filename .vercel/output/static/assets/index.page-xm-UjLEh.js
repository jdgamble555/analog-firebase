import{b as $,i as l,z as A,B as M,C as S,G as j,E,F as L,H as U,J as N,K as V,M as G,Q as x,S as z,T as B,U as w,V as O,W as R,X as W,Y,Z as J,c as p,e as m,$ as r,a0 as i,a1 as a,a2 as P,p as _,h as C,a3 as u,a4 as F,a5 as H,a6 as K,a7 as Q,a8 as T,a9 as v,aa as y,ab as b,f as c,ac as X,ad as Z,ae as k,af as q}from"./index-zB45RZ9U.js";let g=(()=>{var e;class n{constructor(){this.auth=typeof window<"u"?l(A):null,this.user$=M({loading:!0,data:null}),S(()=>{if(this.user$().loading=!0,!this.auth){this.user$().loading=!1,this.user$().data=null;return}return L(this.auth,t=>{if(this.user$().loading=!1,!t){this.user$().data=null;return}const{photoURL:o,uid:d,displayName:f,email:h}=t,D={photoURL:o,uid:d,displayName:f,email:h};U()&&console.log(D),this.user$().data=D})})}login(){if(this.auth){const t=typeof window<"u"?N:null;t&&t(this.auth,new j)}}logout(){this.auth&&E(this.auth)}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵprov=$({token:e,factory:e.ɵfac,providedIn:"root"}),n})();const ee=e=>e.empty?[]:e.docs.map(n=>{const s=n.data();return{...s,created:new Date(s.created?.toMillis()),id:n.id}});let I=(()=>{var e;class n{constructor(){this.db=V(),this.user=l(g).user$,this.todos=M({data:[],loading:!0}),this.addTodo=(t,o)=>{if(t.preventDefault(),!o)throw"No UID!";const d=t.target,f=new FormData(d),{task:h}=Object.fromEntries(f);typeof h=="string"&&(d.reset(),G(x(this.db,"todos"),{uid:o,text:h,complete:!1,created:z()}))},this.updateTodo=(t,o)=>{B(w(this.db,"todos",t),{complete:o})},this.deleteTodo=t=>{O(w(this.db,"todos",t))},S(()=>{const t=this.user().data;if(!t){this.todos().loading=!1,this.todos().data=[];return}return R(W(x(this.db,"todos"),Y("uid","==",t.uid),J("created")),o=>{this.todos().loading=!1;const d=ee(o);U()&&console.log(d),this.todos().data=d})})}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵprov=$({token:e,factory:e.ɵfac,providedIn:"root"}),n})();function te(e,n){if(e&1){const s=T();r(0,"button",2),_("click",function(){v(s);const o=y();return b(o.ts.updateTodo(o.todo.id,!o.todo.complete))}),i(1," ✔️ "),a()}}function oe(e,n){if(e&1){const s=T();r(0,"button",2),_("click",function(){v(s);const o=y();return b(o.ts.updateTodo(o.todo.id,!o.todo.complete))}),i(1," ❌ "),a()}}let ne=(()=>{var e;class n{constructor(){this.ts=l(I)}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵcmp=p({type:e,selectors:[["app-todo-item"]],inputs:{todo:"todo"},standalone:!0,features:[m],decls:8,vars:5,consts:[[3,"ngClass"],["type","button"],["type","button",3,"click"]],template:function(t,o){t&1&&(r(0,"span",0),i(1),a(),r(2,"span",0),i(3),a(),P(4,te,2,0,"button",1)(5,oe,2,0),r(6,"button",2),_("click",function(){return o.ts.deleteTodo(o.todo.id)}),i(7," 🗑 "),a()),t&2&&(C("ngClass",o.todo.complete?"line-through text-green-700":""),u(),F(o.todo.text),u(),C("ngClass",o.todo.complete?"line-through text-green-700":""),u(),F(o.todo.id),u(),H(4,o.todo.complete?4:5))},dependencies:[K,Q],encapsulation:2}),n})(),se=(()=>{var e;class n{constructor(){this.ts=l(I),this.user=l(g).user$}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵcmp=p({type:e,selectors:[["app-todo-form"]],standalone:!0,features:[m],decls:4,vars:0,consts:[[1,"flex","gap-3","items-center","justify-center","mt-5",3,"submit"],["name","task",1,"border","p-2"],["type","submit",1,"border","p-2","rounded-md","text-white","bg-sky-700"]],template:function(t,o){t&1&&(r(0,"form",0),_("submit",function(f){return o.ts.addTodo(f,o.user().data==null?null:o.user().data.uid)}),c(1,"input",1),r(2,"button",2),i(3," Add Task "),a()())},encapsulation:2}),n})();const ae=(e,n)=>n.id;function re(e,n){if(e&1&&c(0,"app-todo-item",1),e&2){const s=n.$implicit;C("todo",s)}}function ie(e,n){e&1&&(r(0,"p")(1,"b"),i(2,"Add your first todo item!"),a()())}let de=(()=>{var e;class n{constructor(){this.todos=l(I).todos}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵcmp=p({type:e,selectors:[["app-todos"]],standalone:!0,features:[m],decls:6,vars:1,consts:[[1,"grid","grid-cols-[auto,auto,auto,auto]","gap-3","justify-items-start"],[1,"contents",3,"todo"],["class","contents",3,"todo"]],template:function(t,o){t&1&&(r(0,"div")(1,"div",0),X(2,re,1,1,"app-todo-item",2,ae,!1,ie,3,0,"p"),a(),c(5,"app-todo-form"),a()),t&2&&(u(2),Z(o.todos().data))},dependencies:[ne,se],encapsulation:2}),n})(),ue=(()=>{var e;class n{constructor(){this.us=l(g)}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵcmp=p({type:e,selectors:[["app-profile"]],standalone:!0,features:[m],decls:9,vars:3,consts:[[1,"flex","flex-col","gap-3","items-center"],[1,"font-bold"],["width","100","height","100","alt","user avatar",3,"src"],["type","button",1,"border","p-2","rounded-md","text-white","bg-lime-600",3,"click"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"h3",1),i(2),a(),c(3,"img",2),r(4,"p"),i(5),a(),r(6,"button",3),_("click",function(){return o.us.logout()}),i(7," Logout "),a(),c(8,"app-todos"),a()),t&2&&(u(2),k("Hi ",o.us.user$().data==null?null:o.us.user$().data.displayName,"!"),u(),C("src",o.us.user$().data==null?null:o.us.user$().data.photoURL,q),u(2),k("Your userID is ",o.us.user$().data==null?null:o.us.user$().data.uid,""))},dependencies:[de],encapsulation:2}),n})();function le(e,n){e&1&&(r(0,"p"),i(1,"Loading..."),a())}function ce(e,n){e&1&&c(0,"app-profile")}function pe(e,n){if(e&1){const s=T();r(0,"button",2),_("click",function(){v(s);const o=y();return b(o.us.login())}),i(1," Signin with Google "),a()}}let me=(()=>{var e;class n{constructor(){this.us=l(g)}}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵcmp=p({type:e,selectors:[["app-index"]],standalone:!0,features:[m],decls:6,vars:1,consts:[[1,"text-center"],[1,"text-3xl","font-semibold","my-3"],["type","button",1,"border","p-2","rounded-md","text-white","bg-red-600",3,"click"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"h1",1),i(2,"Angular Firebase Todo App"),a(),P(3,le,2,0,"p")(4,ce,1,0)(5,pe,2,0),a()),t&2&&(u(3),H(3,o.us.user$().loading?3:o.us.user$().data?4:5))},dependencies:[ue],encapsulation:2}),n})(),fe=(()=>{var e;class n{}return e=n,e.ɵfac=function(t){return new(t||e)},e.ɵcmp=p({type:e,selectors:[["app-home"]],standalone:!0,features:[m],decls:1,vars:0,template:function(t,o){t&1&&c(0,"app-index")},dependencies:[me],encapsulation:2}),n})();export{fe as default};
